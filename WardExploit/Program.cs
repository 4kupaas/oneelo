using System;
using EloBuddy;
using EloBuddy.SDK;
using EloBuddy.SDK.Events;
using EloBuddy.SDK.Menu;
using EloBuddy.SDK.Menu.Values;
using System.Collections.Generic;

namespace WardExploit
{
    internal class Program
    {
        public static Menu menu;
        public static AIHeroClient player => Player.Instance;

        private static void Main(string[] args)
        {
            Loading.OnLoadingComplete += Loading_OnLoadingComplete;
        }

        private static void Loading_OnLoadingComplete(EventArgs args)
        {
            Game.OnTick += Game_OnTick;
        }
        
        private static void Game_OnTick(EventArgs args)
        {
            if (!player.IsInShopRange())
                return;

            const int totem = 3340;
            const int lens = 3341;
            const int farsight = 3363;
            const int oracle = 3364;

            if (MenuHandler.GetSliderValue(MenuHandler.mainMenu, "Ward Type:") == 0 && !player.HasItem(totem))
                Shop.BuyItem(totem);
            else if (MenuHandler.GetSliderValue(MenuHandler.mainMenu, "Ward Type:") == 1 && !player.HasItem(farsight))
            {
                Shop.BuyItem(totem);
                Shop.BuyItem(farsight);
            }
            else if (MenuHandler.GetSliderValue(MenuHandler.mainMenu, "Ward Type:") == 2 && !player.HasItem(lens))
                Shop.BuyItem(lens);
            else if (MenuHandler.GetSliderValue(MenuHandler.mainMenu, "Ward Type:") == 3 && !player.HasItem(oracle))
            {
                Shop.BuyItem(lens);
                Shop.BuyItem(oracle);
            }
        }

        public static void WardSlider_OnValueChange(ValueBase<int> sender, ValueBase<int>.ValueChangeArgs args)
        {
            int value = 0;
            if (args != null)
                value = args.NewValue;
            else
                value = sender.CurrentValue;

            if (value == 0)
                sender.DisplayName = "Ward Type: Warding Totem";
            else if (value == 1)
                sender.DisplayName = "Ward Type: Farsight Trinket";
            else if(value == 2)
                sender.DisplayName = "Ward Type: Sweeping Lens";
            else if(value == 3)
                sender.DisplayName = "Ward Type: Oracles Lens";
        }
    }
}